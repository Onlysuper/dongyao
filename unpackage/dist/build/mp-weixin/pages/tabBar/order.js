(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/order"],{"0c55":function(t,e,a){"use strict";a.r(e);var i=a("d301"),r=a("655e");for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a("cca2");var o=a("2877"),s=Object(o["a"])(r["default"],i["a"],i["b"],!1,null,null,null);e["default"]=s.exports},"1ae6":function(t,e,a){"use strict";a("ba95");var i=n(a("b0ce")),r=n(a("ed46"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(r.default))},"58d4":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{}},methods:{goLogin:function(){t.navigateTo({url:"/pages/login/login"})}}};e.default=a}).call(this,a("543d")["default"])},"5deb":function(t,e,a){},"655e":function(t,e,a){"use strict";a.r(e);var i=a("58d4"),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=r.a},"686d":function(t,e,a){"use strict";var i=a("e4fe"),r=a.n(i);r.a},"725f":function(t,e,a){"use strict";var i=a("5deb"),r=a.n(i);r.a},8392:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"m-empty-page"},[a("view",{staticClass:"m-conainer"},[a("image",{staticStyle:{width:"500rpx",height:"300rpx"},attrs:{src:"../../static/img/icon/img_nothave.png",mode:"aspectFit"}}),a("view",{staticClass:"m-text",attrs:{eventid:"5f5d7dc1-0"},on:{tap:t.goLogin}},[t._v("点击登录，畅享更好服务")])])])},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},"86da":function(t,e,a){"use strict";a.r(e);var i=a("88a5"),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=r.a},"88a5":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{}},methods:{goLogin:function(){t.navigateTo({url:"/pages/login/login"})}}};e.default=a}).call(this,a("543d")["default"])},9445:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"m-product-list",props:{rowData:{type:Object,default:function(){return{}}},productList:{type:Object},status:{type:[String,Number],default:""},title:{type:[String,Number],default:""},createTime:{type:[String,Number],default:""},extrctime:{type:[String,Number],default:""},aboutPickingTime:{type:[String,Number],default:""},describe:{type:[String,Number],default:""},price:{type:[String,Number],default:""},num:{type:[String,Number],default:""}},data:function(){return{}},methods:{touchOnGoods:function(t){this.$emit("touchOnGoods",{data:this.rowData,elem:t})},detailGood:function(){this.$emit("detailGood",{data:this.rowData})},takeGood:function(){this.$emit("takeGood",{data:this.rowData})},payGood:function(){this.$emit("payGood",{data:this.rowData})},commentGood:function(){this.$emit("commentGood",{data:this.rowData})}}};e.default=i},a3f8:function(t,e,a){},a6cb:function(t,e,a){"use strict";a.r(e);var i=a("af8c"),r=a("b478");for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a("725f");var o=a("2877"),s=Object(o["a"])(r["default"],i["a"],i["b"],!1,null,null,null);e["default"]=s.exports},a915:function(t,e,a){"use strict";var i=a("e9c6"),r=a.n(i);r.a},af8c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"m-order-pro-list"},[a("view",{staticClass:"m-header"},[a("view",{},[t._v(t._s(t.title)),a("view",{staticClass:"m-time"},[t._v(t._s(t.createTime))])]),1==t.status?a("view",{staticStyle:{color:"#ee6641"}},[t._v("待取货")]):2==t.status?a("view",{staticStyle:{color:"#b2aaaa"}},[t._v("等待付款")]):3==t.status?a("view",{staticStyle:{color:"#b2aaaa"}},[t._v("待评论")]):4==t.status?a("view",{staticStyle:{color:"#b2aaaa"}},[t._v("已退款")]):5==t.status?a("view",{staticStyle:{color:"#b2aaaa"}},[t._v("已取消")]):6==t.status?a("view",{staticStyle:{color:"#b2aaaa"}},[t._v("已失效")]):t._e()]),a("view",{staticClass:"m-body"},[a("view",{staticClass:"m-img-container"},[a("view",{staticClass:"m-img-box",attrs:{eventid:"1a6ae60c-0"},on:{tap:t.detailGood}},[a("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.productList[0].pictures[0].pictureUrl,mode:"aspectFull"}})])]),a("view",{staticClass:"m-text-right",attrs:{eventid:"1a6ae60c-1"},on:{tap:t.detailGood}},[a("view",{staticClass:"price"},[t._v("￥"+t._s(t.price))]),a("view",{staticClass:"num"},[t._v("共"+t._s(t.num)+"件")])])]),a("view",{staticClass:"m-footer"},[a("view",{staticClass:"footleft"},[a("view",{staticClass:"footleft"},[a("view",{staticClass:"m-name"},[t._v(t._s(t.proname))]),3==t.status?a("view",{staticClass:"m-describe"},[t._v("提货时间:"+t._s(t.extrctime))]):a("view",{staticClass:"m-describe"},[t._v("提货时间:"+t._s(t.aboutPickingTime))]),a("view",{staticClass:"m-describe"},[t._v(t._s(t.describe))])])]),a("view",{staticClass:"footright"},[1==t.status?a("view",{attrs:{eventid:"1a6ae60c-4"},on:{tap:t.takeGood}},[a("view",{staticClass:"but",staticStyle:{color:"#a7a7a7",border:"1px solid #a7a7a7"}},[t._v("取货")])]):2==t.status?a("view",{attrs:{eventid:"1a6ae60c-2"},on:{tap:t.payGood}},[a("view",{staticClass:"but",staticStyle:{color:"#ef7251",border:"1px solid #ef7251"}},[t._v("立即付款")])]):3==t.status?a("view",[a("view",{staticClass:"but",staticStyle:{color:"#ef7251",border:"1px solid #ef7251","margin-left":"10rpx"},attrs:{eventid:"1a6ae60c-3"},on:{tap:t.commentGood}},[t._v("评论")])]):t._e()])])])},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},b478:function(t,e,a){"use strict";a.r(e);var i=a("9445"),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=r.a},b5c5:function(t,e,a){"use strict";a.r(e);var i=a("8392"),r=a("86da");for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a("a915");var o=a("2877"),s=Object(o["a"])(r["default"],i["a"],i["b"],!1,null,null,null);e["default"]=s.exports},cca2:function(t,e,a){"use strict";var i=a("a3f8"),r=a.n(i);r.a},d301:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"m-empty-page"},[a("view",{staticClass:"m-conainer"},[a("image",{staticStyle:{width:"500rpx",height:"300rpx"},attrs:{src:"../../static/img/icon/img_nothave.png",mode:"aspectFit"}}),a("view",{staticClass:"m-text"},[t._v("~哎，什么都没有呢~")])])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},d48b:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"m-order-page"},[a("view",{staticClass:"fixedit"},[a("m-tab",{attrs:{tabActive:t.tabActive,rowdata:t.tabList,eventid:"2facfe52-0",mpcomid:"2facfe52-0"},on:{handleFn:t.tabChange}})],1),a("view",{staticStyle:{height:"60px"}}),t.isLogin?0==t.orderList.length?a("m-empty",{attrs:{mpcomid:"2facfe52-1"}}):a("view",{staticClass:"m-order-body"},[t._l(t.orderList,function(e,i){return a("m-order-list",{key:i,attrs:{rowData:e,status:e.order.state,price:e.order.totalPrice,num:e.order.totalCount,createTime:e.order.createTime,extrctime:e.order.actualPickingTime,aboutPickingTime:e.order.aboutPickingTime,title:e.store.name,productList:e.productList,eventid:"2facfe52-1-"+i,mpcomid:"2facfe52-2-"+i},on:{detailGood:t.detailGood,takeGood:t.takeGood,payGood:t.payGood,againGood:t.againGood,commentGood:t.commentGood}})}),a("uni-load-more",{attrs:{status:t.mloading,mpcomid:"2facfe52-3"}})],2):a("m-need-login",{attrs:{mpcomid:"2facfe52-4"}})],1)},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},e4fe:function(t,e,a){},e9c6:function(t,e,a){},ed46:function(t,e,a){"use strict";a.r(e);var i=a("d48b"),r=a("f04d");for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a("686d");var o=a("2877"),s=Object(o["a"])(r["default"],i["a"],i["b"],!1,null,null,null);e["default"]=s.exports},f04d:function(t,e,a){"use strict";a.r(e);var i=a("f791"),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=r.a},f791:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=u(a("a34a")),r=(u(a("d5ef")),u(a("b266"))),n=u(a("a6cb")),o=u(a("b5c5")),s=u(a("ee2b")),c=u(a("0c55"));function u(t){return t&&t.__esModule?t:{default:t}}function d(t,e,a,i,r,n,o){try{var s=t[n](o),c=s.value}catch(u){return void a(u)}s.done?e(c):Promise.resolve(c).then(i,r)}function l(t){return function(){var e=this,a=arguments;return new Promise(function(i,r){var n=t.apply(e,a);function o(t){d(n,i,r,o,s,"next",t)}function s(t){d(n,i,r,o,s,"throw",t)}o(void 0)})}}function f(t){return p(t)||m(t)||v()}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function p(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){b(t,e,a[e])})}return t}function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h=1,w=1,y={name:"m-footer-car",props:{},components:{mTab:r.default,uniLoadMore:s.default,mOrderList:n.default,mNeedLogin:o.default,mEmpty:c.default},data:function(){return{isLogin:!1,tabActive:1,tabList:[{label:"待取货",id:1},{label:"待支付",id:2},{label:"待评价",id:3},{label:"全部",id:4}],orderList:[],mloading:"more"}},methods:{detailGood:function(e){var a=e.data.order.id,i=1;t.navigateTo({url:"/pages/order/order?orderid=".concat(a,"&type=").concat(i)})},payGood:function(e){var a=e.data,i=g({},a.order),r=g({},a.store),n=r.id,o=i.totalCount,s=i.paymentType,c=i.couponId,u=f(a.productList),d=encodeURI(JSON.stringify({proUrlData:u}));t.navigateTo({url:"/pages/order/pay?storeid="+n+"&totalCount="+o+"&type="+s+"&couponId="+c+"&proUrlData="+d})},commentGood:function(e){var a=e.data,i=a.order.id,r=f(a.productList),n=encodeURI(JSON.stringify({ProductUrlData:r}));t.navigateTo({url:"/pages/order/comment?orderid="+i+"&ProductUrlData="+n})},takeGood:function(e){var a=e.data.order.id;t.navigateTo({url:"/pages/order/order?orderid="+a})},checkLogin:function(){var t=l(i.default.mark(function t(){var e;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.globelIsLogin();case 2:e=t.sent,this.isLogin=e,e&&(h=1,this.orderList=[],this.getOrders());case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getOrders:function(){var e=this,a=this;if(t.showLoading({}),w&&h>w)return a.mloading="noMore",t.hideLoading(),void t.stopPullDownRefresh();this.mPost("/server/o/myOrders",{state:a.tabActive,start:h,length:20}).then(function(a){if(a.data){var i=a.data;if(i.orders){w=i.pages||1;var r=i.orders;e.orderList=e.orderList.concat(r),h++}}t.hideLoading(),t.stopPullDownRefresh()}).catch(function(e){t.hideLoading(),t.stopPullDownRefresh()})},tabChange:function(t){this.tabActive=t.id,h=1,this.orderList=[],this.getOrders()}},onReachBottom:function(){this.mloading="loading",this.getOrders()},onLoad:function(e){this.tabActive=t.getStorageSync("orderTab")||1,this.checkLogin()},onPullDownRefresh:function(){h=1,this.orderList=[],this.getOrders()},onShow:function(){this.tabActive=t.getStorageSync("orderTab")||1,this.checkLogin()}};e.default=y}).call(this,a("543d")["default"])}},[["1ae6","common/runtime","common/vendor"]]]);