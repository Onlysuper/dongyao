(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/order"],{"0c55":function(t,e,a){"use strict";a.r(e);var n=a("d301"),o=a("655e");for(var r in o)"default"!==r&&function(t){a.d(e,t,function(){return o[t]})}(r);a("cca2");var i=a("2877"),s=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"1ae6":function(t,e,a){"use strict";a("ba95");var n=r(a("b0ce")),o=r(a("ed46"));function r(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(o.default))},2465:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"m-order-page"},[a("view",{staticClass:"fixedit"},[a("m-tab",{attrs:{tabActive:t.tabActive,rowdata:t.tabList,eventid:"2facfe52-0",mpcomid:"2facfe52-0"},on:{handleFn:t.tabChange}})],1),a("view",{staticStyle:{height:"60px"}}),t.isLogin?0==t.orderList.length?a("m-empty",{attrs:{mpcomid:"2facfe52-1"}}):a("view",{staticClass:"m-order-body"},[t._l(t.orderList,function(e,n){return a("m-order-list",{key:n,attrs:{rowData:e,status:e.order.state,price:e.order.totalPrice,num:e.order.totalCount,createTime:e.order.createTime,extrctime:e.order.actualPickingTime,aboutPickingTime:e.order.aboutPickingTime,title:e.store.name,productList:e.productList,eventid:"2facfe52-1-"+n,mpcomid:"2facfe52-2-"+n},on:{takeGood:t.takeGood,payGood:t.payGood,againGood:t.againGood,commentGood:t.commentGood}})}),a("uni-load-more",{attrs:{status:t.mloading,mpcomid:"2facfe52-3"}})],2):a("m-need-login",{attrs:{mpcomid:"2facfe52-4"}})],1)},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},"32cf":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"uni-load-more"},[a("view",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.status&&t.showIcon,expression:"status === 'loading' && showIcon"}],staticClass:"uni-load-more__img"},[a("view",{staticClass:"load1"},[a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}})]),a("view",{staticClass:"load2"},[a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}})]),a("view",{staticClass:"load3"},[a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}})])]),a("text",{staticClass:"uni-load-more__text",style:{color:t.color}},[t._v(t._s("more"===t.status?t.contentText.contentdown:"loading"===t.status?t.contentText.contentrefresh:t.contentText.contentnomore))])])},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},5437:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"uni-load-more",props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},color:{type:String,default:"#777777"},contentText:{type:Object,default:function(){return{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}}},data:function(){return{}}};e.default=n},"58d4":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{}},methods:{goLogin:function(){t.navigateTo({url:"/pages/login/login"})}}};e.default=a}).call(this,a("543d")["default"])},"5deb":function(t,e,a){},"655e":function(t,e,a){"use strict";a.r(e);var n=a("58d4"),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=o.a},"686d":function(t,e,a){"use strict";var n=a("e4fe"),o=a.n(n);o.a},"725f":function(t,e,a){"use strict";var n=a("5deb"),o=a.n(n);o.a},8392:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"m-empty-page"},[a("view",{staticClass:"m-conainer"},[a("image",{staticStyle:{width:"500rpx",height:"300rpx"},attrs:{src:"../../static/img/icon/img_nothave.png",mode:"aspectFit"}}),a("view",{staticClass:"m-text",attrs:{eventid:"5f5d7dc1-0"},on:{tap:t.goLogin}},[t._v("点击登录，畅享更好服务")])])])},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},"86da":function(t,e,a){"use strict";a.r(e);var n=a("88a5"),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=o.a},"88a5":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{}},methods:{goLogin:function(){t.navigateTo({url:"/pages/login/login"})}}};e.default=a}).call(this,a("543d")["default"])},9445:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"m-product-list",props:{rowData:{type:Object,default:function(){return{}}},productList:{type:Object},status:{type:[String,Number],default:""},title:{type:[String,Number],default:""},createTime:{type:[String,Number],default:""},extrctime:{type:[String,Number],default:""},aboutPickingTime:{type:[String,Number],default:""},describe:{type:[String,Number],default:""},price:{type:[String,Number],default:""},num:{type:[String,Number],default:""}},data:function(){return{}},methods:{touchOnGoods:function(t){this.$emit("touchOnGoods",{data:this.rowData,elem:t})},takeGood:function(){this.$emit("takeGood",{data:this.rowData})},payGood:function(){this.$emit("payGood",{data:this.rowData})},commentGood:function(){this.$emit("commentGood",{data:this.rowData})}}};e.default=n},a3f8:function(t,e,a){},a6cb:function(t,e,a){"use strict";a.r(e);var n=a("d318"),o=a("b478");for(var r in o)"default"!==r&&function(t){a.d(e,t,function(){return o[t]})}(r);a("725f");var i=a("2877"),s=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},a915:function(t,e,a){"use strict";var n=a("e9c6"),o=a.n(n);o.a},aa01:function(t,e,a){},af80:function(t,e,a){"use strict";var n=a("aa01"),o=a.n(n);o.a},b478:function(t,e,a){"use strict";a.r(e);var n=a("9445"),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=o.a},b5c5:function(t,e,a){"use strict";a.r(e);var n=a("8392"),o=a("86da");for(var r in o)"default"!==r&&function(t){a.d(e,t,function(){return o[t]})}(r);a("a915");var i=a("2877"),s=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},cca2:function(t,e,a){"use strict";var n=a("a3f8"),o=a.n(n);o.a},d301:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"m-empty-page"},[a("view",{staticClass:"m-conainer"},[a("image",{staticStyle:{width:"500rpx",height:"300rpx"},attrs:{src:"../../static/img/icon/img_nothave.png",mode:"aspectFit"}}),a("view",{staticClass:"m-text"},[t._v("~哎，什么都没有呢~")])])])}];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},d318:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"m-order-pro-list"},[a("view",{staticClass:"m-header"},[a("view",{},[t._v(t._s(t.title)),a("view",{staticClass:"m-time"},[t._v(t._s(t.createTime))])]),1==t.status?a("view",{staticStyle:{color:"#ee6641"}},[t._v("待取货")]):2==t.status?a("view",{staticStyle:{color:"#b2aaaa"}},[t._v("等待付款")]):3==t.status?a("view",{staticStyle:{color:"#b2aaaa"}},[t._v("待评论")]):t._e()]),a("view",{staticClass:"m-body"},[a("view",{staticClass:"m-img-container"},t._l(t.productList,function(t,e){return a("view",{key:t.id,staticClass:"m-img-box"},[a("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.pictures[0].pictureUrl,mode:"aspectFill"}})])})),a("view",{staticClass:"m-text-right"},[a("view",{staticClass:"price"},[t._v("￥"+t._s(t.price))]),a("view",{staticClass:"num"},[t._v("共"+t._s(t.num)+"件")])])]),a("view",{staticClass:"m-footer"},[a("view",{staticClass:"footleft"},[a("view",{staticClass:"footleft"},[a("view",{staticClass:"m-name"},[t._v(t._s(t.proname))]),3==t.status?a("view",{staticClass:"m-describe"},[t._v("提货时间:"+t._s(t.extrctime))]):a("view",{staticClass:"m-describe"},[t._v("提货时间:"+t._s(t.aboutPickingTime))]),a("view",{staticClass:"m-describe"},[t._v(t._s(t.describe))])])]),a("view",{staticClass:"footright"},[1==t.status?a("view",{attrs:{eventid:"1a6ae60c-2"},on:{tap:t.takeGood}},[a("view",{staticClass:"but",staticStyle:{color:"#a7a7a7",border:"1px solid #a7a7a7"}},[t._v("取货")])]):2==t.status?a("view",{attrs:{eventid:"1a6ae60c-0"},on:{tap:t.payGood}},[a("view",{staticClass:"but",staticStyle:{color:"#ef7251",border:"1px solid #ef7251"}},[t._v("立即付款")])]):3==t.status?a("view",[a("view",{staticClass:"but",staticStyle:{color:"#ef7251",border:"1px solid #ef7251","margin-left":"10rpx"},attrs:{eventid:"1a6ae60c-1"},on:{tap:t.commentGood}},[t._v("评论")])]):t._e()])])])},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},e4cb:function(t,e,a){"use strict";a.r(e);var n=a("5437"),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=o.a},e4fe:function(t,e,a){},e9c6:function(t,e,a){},ed46:function(t,e,a){"use strict";a.r(e);var n=a("2465"),o=a("f04d");for(var r in o)"default"!==r&&function(t){a.d(e,t,function(){return o[t]})}(r);a("686d");var i=a("2877"),s=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},ee2b:function(t,e,a){"use strict";a.r(e);var n=a("32cf"),o=a("e4cb");for(var r in o)"default"!==r&&function(t){a.d(e,t,function(){return o[t]})}(r);a("af80");var i=a("2877"),s=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},f04d:function(t,e,a){"use strict";a.r(e);var n=a("f791"),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=o.a},f791:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;c(a("d5ef"));var n=c(a("b266")),o=c(a("a6cb")),r=c(a("b5c5")),i=c(a("ee2b")),s=c(a("0c55"));function c(t){return t&&t.__esModule?t:{default:t}}function u(t){return f(t)||l(t)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){m(t,e,a[e])})}return t}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var g=1,b=1,p={name:"m-footer-car",props:{},components:{mTab:n.default,uniLoadMore:i.default,mOrderList:o.default,mNeedLogin:r.default,mEmpty:s.default},data:function(){return{isLogin:!1,tabActive:1,tabList:[{label:"待取货",id:1},{label:"待支付",id:2},{label:"待评价",id:3},{label:"全部",id:4}],orderList:[],mloading:"more"}},methods:{payGood:function(e){var a=e.data,n=v({},a.order),o=v({},a.store),r=o.id,i=n.totalCount,s=n.paymentType,c=n.couponId,d=u(a.productList),l=encodeURI(JSON.stringify({proUrlData:d}));t.navigateTo({url:"/pages/order/pay?storeid="+r+"&totalCount="+i+"&type="+s+"&couponId="+c+"&proUrlData="+l})},commentGood:function(e){var a=e.data,n=a.order.id,o=u(a.productList),r=encodeURI(JSON.stringify({ProductUrlData:o}));t.navigateTo({url:"/pages/order/comment?orderid="+n+"&ProductUrlData="+r})},takeGood:function(e){var a=e.data.order.id;t.navigateTo({url:"/pages/order/order?orderid="+a})},checkLogin:function(){var t=this;t.globelIsLogin().then(function(e){"success"==e&&(t.isLogin=!0)}).catch(function(e){t.isLogin=!1})},getOrders:function(){var e=this,a=this;if(t.showLoading({}),b&&g>b)return a.mloading="noMore",t.hideLoading(),void t.stopPullDownRefresh();this.mPost("/server/o/myOrders",{state:a.tabActive,start:g,length:20}).then(function(a){if(a.data){var n=a.data;if(n.orders){b=n.pages||1;var o=n.orders;e.orderList=e.orderList.concat(o),g++}}t.hideLoading(),t.stopPullDownRefresh()}).catch(function(e){t.hideLoading(),t.stopPullDownRefresh()})},tabChange:function(t){this.tabActive=t.id,g=1,this.orderList=[],this.getOrders()}},onReachBottom:function(){this.mloading="loading",this.getOrders()},onLoad:function(e){this.tabActive=t.getStorageSync("orderTab")||1,this.checkLogin(),g=1,this.getOrders()},onPullDownRefresh:function(){console.log("清空数据"),g=1,this.orderList=[],this.getOrders()},onShow:function(){this.tabActive=t.getStorageSync("orderTab")||1,g=1,this.orderList=[],this.getOrders()}};e.default=p}).call(this,a("543d")["default"])}},[["1ae6","common/runtime","common/vendor"]]]);