(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product"],{"2be0":function(t,e,s){},3177:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(s("e944"));function a(t){return t&&t.__esModule?t:{default:t}}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},i=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),i.forEach(function(e){c(t,e,s[e])})}return t}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function o(t){return u(t)||l(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}var v={components:{uniRate:i.default},data:function(){return{details:{},timeSpan:"",pintunNum:"",beforeHeaderzIndex:11,afterHeaderzIndex:10,beforeHeaderOpacity:1,afterHeaderOpacity:0,swiperList:[],currentSwiper:0,anchorlist:[],selectAnchor:0,serviceClass:"",specClass:"",shareClass:"",storeId:"",goodsData:{},isAssemble:!1,pintuanData:{},commentData:{},degreeData:"",selectSpec:null,descriptionStr:'<div style="text-align:center;"></div>'}},onReady:function(){this.calcAnchor()},onLoad:function(t){var e=this;e.showBack=!1;var s=t.id;e.mPost("/server/p/product",{id:s}).then(function(t){if("1"==t.code&&t.data){var i=t.data;e.goodsData=i,e.descriptionStr=i.describes,e.storeId=i.storeId,e.timeSpan=i.timeSpan,e.details=i.details,i.pictures&&(e.swiperList=o(i.pictures)),e.isAssemble=1==i.isAssemble,e.isAssemble&&e.getPintuanUsers(s)}}),e.getComments(s),e.getDegree(s)},onPageScroll:function(t){this.selectAnchor=t.scrollTop>=this.anchorlist[2].top?2:t.scrollTop>=this.anchorlist[1].top?1:0;var e=375;t.scrollTop=t.scrollTop>e?375:t.scrollTop,this.afterHeaderOpacity=t.scrollTop*(1/e),this.beforeHeaderOpacity=1-this.afterHeaderOpacity,this.beforeHeaderzIndex=t.scrollTop>0?10:11,this.afterHeaderzIndex=t.scrollTop>0?11:10},methods:{goHome:function(){t.switchTab({url:"/pages/tabBar/home"})},goStore:function(){console.log("进店"),t.navigateTo({url:"/pages/store/store?storeid="+this.storeId})},getPintuanUsers:function(t){var e=this;this.mPost("/server/g/group/buy/users",{start:0,length:100,productId:t}).then(function(t){t.data&&(e.pintunNum=t.data.endRow,e.pintuanData=t.data.list)})},getComments:function(t){var e=this;this.mPost("/server/c/comments",{start:0,length:100,productId:t}).then(function(t){"1"==t.code&&t.data&&(e.commentData=t.data.list)})},getDegree:function(t){var e=this;this.mPost("/server/c/praise/degree",{productId:t}).then(function(t){"1"==t.code&&t.data&&(e.degreeData=t.data)})},swiperChange:function(t){this.currentSwiper=t.detail.current},share:function(){this.shareClass="show"},hideShare:function(){var t=this;this.shareClass="hide",setTimeout(function(){t.shareClass="none"},150)},buy:function(){this.joinCart(2)},pintuan:function(){this.joinCart(2)},joinCart:function(e){var s=this,i=n({},this.goodsData);i["describes"]="",i["buyCount"]="1";var a=[i],c=encodeURI(JSON.stringify({proUrlData:a})),o=1;t.navigateTo({url:"/pages/order/pay?storeid="+s.storeId+"&totalCount="+o+"&type="+e+"&proUrlData="+c})},toAnchor:function(e){this.selectAnchor=e,t.pageScrollTo({scrollTop:this.anchorlist[e].top,duration:200})},calcAnchor:function(){var e=this;this.anchorlist=[{name:"主图",top:0},{name:"评价",top:0},{name:"详情",top:0}];var s=t.createSelectorQuery().select("#comments");s.boundingClientRect(function(s){var i=0,a=t.upx2px(100);e.anchorlist[1].top=s.top-a-i,e.anchorlist[2].top=s.bottom-a-i}).exec()},back:function(){t.navigateBack()},showService:function(){console.log("show"),this.serviceClass="show"},hideService:function(){var t=this;this.serviceClass="hide",setTimeout(function(){t.serviceClass="none"},200)},showSpec:function(t){console.log("show"),this.specClass="show",this.specCallback=t},specCallback:function(){},hideSpec:function(){var t=this;this.specClass="hide",this.selectSpec&&this.specCallback&&this.specCallback(),this.specCallback=!1,setTimeout(function(){t.specClass="none"},200)},discard:function(){}},mounted:function(){}};e.default=v}).call(this,s("543d")["default"])},"44e6":function(t,e,s){"use strict";s("ba95");var i=n(s("b0ce")),a=n(s("717e"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(a.default))},"717e":function(t,e,s){"use strict";s.r(e);var i=s("f7e1"),a=s("9f3f");for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);s("e83d");var c=s("2877"),o=Object(c["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=o.exports},"9f3f":function(t,e,s){"use strict";s.r(e);var i=s("3177"),a=s.n(i);for(var n in i)"default"!==n&&function(t){s.d(e,t,function(){return i[t]})}(n);e["default"]=a.a},e83d:function(t,e,s){"use strict";var i=s("2be0"),a=s.n(i);a.a},f7e1:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",[s("view",{staticClass:"status",style:{opacity:t.afterHeaderOpacity}}),s("view",{staticClass:"header"},[s("view",{staticClass:"before",style:{opacity:1-t.afterHeaderOpacity,zIndex:t.beforeHeaderzIndex}},[s("view",{staticClass:"back"},[t.showBack?s("view",{staticClass:"icon xiangqian",attrs:{eventid:"655b68cc-0"},on:{tap:t.back}}):t._e()]),s("view",{staticClass:"middle"}),s("view",{staticClass:"icon-btn"})]),s("view",{staticClass:"after",style:{opacity:t.afterHeaderOpacity,zIndex:t.afterHeaderzIndex}},[s("view",{staticClass:"back"},[t.showBack?s("view",{staticClass:"icon xiangqian",attrs:{eventid:"655b68cc-1"},on:{tap:t.back}}):t._e()]),s("view",{staticClass:"middle"},t._l(t.anchorlist,function(e,i){return s("view",{key:i,class:[t.selectAnchor==i?"on":""],attrs:{eventid:"655b68cc-2-"+i},on:{tap:function(e){t.toAnchor(i)}}},[t._v(t._s(e.name))])})),s("view",{staticClass:"icon-btn"})])]),s("view",{staticClass:"footer"},[s("view",{staticClass:"icons"},[s("view",{staticClass:"box",attrs:{eventid:"655b68cc-3"},on:{tap:t.goHome}},[t._m(0),s("view",{staticClass:"text"},[t._v("首页")])]),s("view",{staticClass:"box",attrs:{eventid:"655b68cc-4"},on:{tap:t.goStore}},[t._m(1),s("view",{staticClass:"text"},[t._v("进店")])])]),s("view",{staticClass:"btn"},[t.isAssemble?s("view",{staticClass:"joinCart",attrs:{eventid:"655b68cc-5"},on:{tap:t.pintuan}},[t._v("我要拼")]):t._e(),s("view",{staticClass:"buy",attrs:{eventid:"655b68cc-6"},on:{tap:t.buy}},[t._v("立即购买")])])]),s("view",{staticClass:"popup service",class:t.serviceClass,attrs:{eventid:"655b68cc-9"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),t.discard(e)},tap:t.hideService}},[s("view",{staticClass:"mask"}),s("view",{staticClass:"layer",attrs:{eventid:"655b68cc-8"},on:{tap:function(e){e.stopPropagation(),t.discard(e)}}},[s("view",{staticClass:"content"},t._l(t.goodsData.service,function(e,i){return s("view",{key:i,staticClass:"row"},[s("view",{staticClass:"title"},[t._v(t._s(e.name))]),s("view",{staticClass:"description"},[t._v(t._s(e.description))])])})),s("view",{staticClass:"btn"},[s("view",{staticClass:"button",attrs:{eventid:"655b68cc-7"},on:{tap:t.hideService}},[t._v("完成")])])])]),s("view",{staticClass:"popup spec",class:t.specClass,attrs:{eventid:"655b68cc-17"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),t.discard(e)},tap:t.hideSpec}},[s("view",{staticClass:"mask"}),s("view",{staticClass:"layer",attrs:{eventid:"655b68cc-16"},on:{tap:function(e){e.stopPropagation(),t.discard(e)}}},[s("view",{staticClass:"content"},[s("view",{staticClass:"title"},[t._v("选择规格：")]),s("view",{staticClass:"sp"},t._l(t.goodsData.spec,function(e,i){return s("view",{key:i,class:[i==t.selectSpec?"on":""],attrs:{eventid:"655b68cc-10-"+i},on:{tap:function(e){t.setSelectSpec(i)}}},[t._v(t._s(e))])})),null!=t.selectSpec?s("view",{staticClass:"length"},[s("view",{staticClass:"text"},[t._v("数量")]),s("view",{staticClass:"number"},[s("view",{staticClass:"sub",attrs:{eventid:"655b68cc-11"},on:{tap:function(e){e.stopPropagation(),t.sub(e)}}},[s("view",{staticClass:"icon jian"})]),s("view",{staticClass:"input",attrs:{eventid:"655b68cc-13"},on:{tap:function(e){e.stopPropagation(),t.discard(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsData.number,expression:"goodsData.number"}],attrs:{type:"number",eventid:"655b68cc-12"},domProps:{value:t.goodsData.number},on:{input:function(e){e.target.composing||(t.goodsData.number=e.target.value)}}})]),s("view",{staticClass:"add",attrs:{eventid:"655b68cc-14"},on:{tap:function(e){e.stopPropagation(),t.add(e)}}},[s("view",{staticClass:"icon jia"})])])]):t._e()]),s("view",{staticClass:"btn"},[s("view",{staticClass:"button",attrs:{eventid:"655b68cc-15"},on:{tap:t.hideSpec}},[t._v("完成")])])])]),s("view",{staticClass:"swiper-box"},[s("swiper",{attrs:{circular:"true",autoplay:"true",eventid:"655b68cc-20"},on:{change:t.swiperChange}},t._l(t.swiperList,function(e,i){return s("swiper-item",{key:e.id,attrs:{mpcomid:"655b68cc-0-"+i}},["1"==e.type?s("video",{staticClass:"mvideo",attrs:{objectFit:"fill",src:e.pictureUrl,controls:"",eventid:"655b68cc-18-"+i},on:{tap:function(s){t.toSwiper(e)}}}):t._e(),"0"==e.type?s("image",{attrs:{src:e.pictureUrl,eventid:"655b68cc-19-"+i},on:{tap:function(s){t.toSwiper(e)}}}):t._e()])})),s("view",{staticClass:"indicator"},[t._v(t._s(t.currentSwiper+1)+"/"+t._s(t.swiperList.length))])],1),s("view",{staticClass:"info-box goods-info"},[s("view",{staticClass:"title"},[t._v(t._s(t.goodsData.synopsis))]),s("view",{staticClass:"tip-box"}),s("view",{staticClass:"price-box"},[s("view",{staticClass:"price"},[t._v("￥"+t._s(t.goodsData.presentPrice))]),s("view",{staticClass:"oldprice"},[t._v("￥"+t._s(t.goodsData.originalPrice))]),s("view",{staticClass:"num"},[t._v("商品库存："+t._s(t.goodsData.stock))])])]),t.isAssemble?s("view",{staticClass:"info-box pintuan"},[s("view",{staticClass:"m-header"},[s("view",{staticClass:"time-box"},[s("view",{},[t._v("距团购结束")]),s("view",{staticClass:"time"},[t._v(t._s(t.timeSpan))])]),s("view",{staticClass:"text-box"},[t._v("已有"+t._s(t.pintunNum)+"人下单 可直接参与")])]),s("view",{staticClass:"user-list-box"},t._l(t.pintuanData,function(e,i){return s("view",{key:e.id,staticClass:"item-box"},[s("view",{staticClass:"img-box"},[s("image",{staticStyle:{width:"80rpx",height:"80rpx"},attrs:{src:e.headAddress,mode:"aspectFit"}})]),s("view",{staticClass:"body-box"},[t._v(t._s(e.nickname))]),s("view",{staticClass:"time-box"},[s("view",{},[t._v(t._s(e.pickingTime)+"下单")])])])}))]):t._e(),s("view",{staticClass:"info-box comments",attrs:{id:"comments"}},[s("view",{staticClass:"m-header"},[s("view",{staticClass:"m-label"},[t._v("商品评价")]),s("view",{staticClass:"m-detail"},[t._v("好评度 "+t._s(t.degreeData)+"%>")])]),t._l(t.commentData,function(e,i){return s("view",{key:e.id,staticClass:"m-body"},[s("view",{staticClass:"img-box"},[0==e.anonymous?s("image",{staticStyle:{width:"80rpx",height:"80rpx"},attrs:{src:e.headAddress,mode:"aspectFit"}}):s("image",{staticStyle:{width:"80rpx",height:"80rpx"},attrs:{src:"../../static/img/icon/goods_icon_Avatar.png",mode:"aspectFit"}})]),s("view",{staticClass:"container"},[s("view",{staticClass:"user-box"},[s("view",{},[0==e.anonymous?s("view",{staticClass:"user-name"},[t._v(t._s(e.nickname))]):s("view",{staticClass:"user-name"},[t._v("匿名")]),s("view",{staticClass:"time"},[t._v(t._s(e.commentTime))])]),s("uni-rate",{attrs:{size:"18",value:e.starLevel,mpcomid:"655b68cc-1-"+i}})],1),s("view",{staticClass:"content"},[s("view",{},[t._v(t._s(e.commentContent))]),""!=e.replyContent?s("view",{staticClass:"m-reply"},[t._v(t._s(e.replyContent))]):t._e()])])])})],2),s("view",{staticClass:"info-box pro-detail"},[t._m(2),s("view",{staticClass:"m-body"},[s("view",{staticClass:"m-row"},[s("view",{staticClass:"m-cell"},[t._v("产地:"+t._s(t.details.placeOrigin))]),s("view",{staticClass:"m-cell"},[t._v("储存:"+t._s(t.details.placeOrigin))])]),s("view",{staticClass:"m-row"},[s("view",{staticClass:"m-cell"},[t._v("规格:"+t._s(t.details.specs))]),s("view",{staticClass:"m-cell"},[t._v("保质期:"+t._s(t.details.qualityGuaranteePeriod))])])])]),s("view",{staticClass:"description"},[s("view",{staticClass:"content",staticStyle:{padding:"20rpx 0","text-align":"center"}},[s("rich-text",{attrs:{nodes:t.descriptionStr,mpcomid:"655b68cc-2"}})],1)]),s("view",{staticStyle:{height:"100rpx"}})])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"icon home"},[s("image",{staticStyle:{width:"38rpx",height:"100%"},attrs:{src:"../../static/img/icon/goods_icon_house.png",mode:"aspectFit"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"icon store"},[s("image",{staticStyle:{width:"38rpx",height:"100%"},attrs:{src:"../../static/img/icon/goods_icon_shop.png",mode:"aspectFit"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"m-header"},[s("view",{staticClass:"m-label"},[t._v("商品介绍")])])}];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return a})}},[["44e6","common/runtime","common/vendor"]]]);