(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/store/store"],{"13e9":function(t,e,i){"use strict";i.r(e);var s=i("c847"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},1843:function(t,e,i){"use strict";var s=i("747d"),a=i.n(s);a.a},"1ee4":function(t,e,i){"use strict";var s=i("f221"),a=i.n(s);a.a},"273e":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"m-footer-car"},[i("view",{staticClass:"m-icon",attrs:{eventid:"44b39ef1-0"},on:{tap:t.handleFn}},[i("view",{staticClass:"m-num"},[t._v(t._s(t.num))]),i("image",{staticStyle:{width:"120rpx",height:"120rpx"},attrs:{src:"../../static/img/icon/shop_button_buy.png",mode:"aspectFit"}})]),i("view",{staticClass:"m-price"},[t._v(t._s(t.price))]),i("view",{staticClass:"m-but",attrs:{eventid:"44b39ef1-1"},on:{tap:t.payFn}},[t._v(t._s(t.title))])])},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},"2c63":function(t,e,i){"use strict";i.r(e);var s=i("b52e"),a=i("60ac");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("1843");var o=i("2877"),r=Object(o["a"])(a["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},"39b0":function(t,e,i){"use strict";i.r(e);var s=i("e551"),a=i("647e");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("1ee4");var o=i("2877"),r=Object(o["a"])(a["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},5632:function(t,e,i){"use strict";i.r(e);var s=i("273e"),a=i("d9b1");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("5bfd");var o=i("2877"),r=Object(o["a"])(a["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},"5bfd":function(t,e,i){"use strict";var s=i("eade"),a=i.n(s);a.a},"60ac":function(t,e,i){"use strict";i.r(e);var s=i("850a"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},"647e":function(t,e,i){"use strict";i.r(e);var s=i("9fa2"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},"747d":function(t,e,i){},"850a":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"m-store-pro",props:{rowData:{type:Object,rowData:{}}},methods:{touchOnGoods:function(t){this.$emit("touchOnGoods",{data:this.rowData,elem:t})}},data:function(){return{}}};e.default=s},9041:function(t,e,i){"use strict";i.r(e);var s=i("b164"),a=i("13e9");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("ba7a");var o=i("2877"),r=Object(o["a"])(a["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},"9b8d":function(t,e,i){},"9fa2":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"uni-number-box",props:{rowData:{type:Object,default:function(){return{}}},value:{type:Number,default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:this.value}},computed:{disableSubtract:function(){return this.inputValue<=this.min},disableAdd:function(){return this.inputValue>=this.max}},watch:{value:function(t){this.inputValue=t},inputValue:function(t){this.$emit("change",{val:t,rowData:this.rowData})}},methods:{_calcValue:function(t){if(!this.disabled){var e=this._getDecimalScale(),i=this.inputValue*e,s=this.step*e;"subtract"===t?i-=s:"add"===t&&(i+=s),i<this.min||i>this.max||(this.inputValue=i/e)}},_getDecimalScale:function(){var t=1;return~~this.step!==this.step&&(t=Math.pow(10,(this.step+"").split(".")[1].length)),t},_onBlur:function(t){var e=t.detail.value;e?(e=+e,e>this.max?e=this.max:e<this.min&&(e=this.min),this.inputValue=e):this.inputValue=0}}};e.default=s},a2ce:function(t,e,i){"use strict";i("ba95");var s=n(i("b0ce")),a=n(i("9041"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(a.default))},b164:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"m-store-store"},[i("view",{staticClass:"m-store-banner"},[i("view",{staticClass:"m-content"},[i("view",{staticClass:"m-message"},[i("view",{staticClass:"m-img"},[i("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.storeData.imgUrl,mode:"aspectFit"}})]),i("view",{staticClass:"m-body"},[i("view",{staticClass:"m-text-box"},[i("view",{staticClass:"m-title"},[t._v(t._s(t.storeData.name))]),i("view",{staticClass:"m-text"},[t._v(t._s(t.storeData.notice))]),i("view",{staticClass:"m-time"},[t._v("营业："+t._s(t.storeData.businessHours))])]),i("view",{staticClass:"m-phone",attrs:{eventid:"05dd8904-0"},on:{tap:function(e){t.callPhone(t.storeData.tel)}}},[i("image",{staticStyle:{width:"40rpx",height:"40rpx","margin-left":"20rpx"},attrs:{src:"../../static/img/icon/shop_icon_phone.png",mode:"aspectFit"}})])])])])]),i("view",{staticClass:"category-list"},[i("scroll-view",{staticClass:"left",attrs:{"scroll-y":"true"}},t._l(t.storeMenu,function(e,s){return i("view",{key:e.id,staticClass:"row",class:[s==t.showCategoryIndex?"on":""],attrs:{eventid:"05dd8904-1-"+s},on:{tap:function(i){t.showCategory(e.id)}}},[i("view",{staticClass:"text"},[i("view",{staticClass:"block"}),t._v(t._s(e.name))])])})),i("scroll-view",{staticClass:"right",attrs:{"scroll-y":"true"}},t._l(t.storeMenu,function(e,s){return i("view",{directives:[{name:"show",rawName:"v-show",value:s==t.showCategoryIndex,expression:"index==showCategoryIndex"}],key:e.id,staticClass:"category"},[i("view",{staticClass:"list"},t._l(e.list,function(e,a){return i("view",{key:a,staticClass:"box"},[i("m-store-pro",{attrs:{rowData:e,eventid:"05dd8904-2-"+s+"-"+a,mpcomid:"05dd8904-0-"+s+"-"+a},on:{touchOnGoods:t.touchOnGoods}})],1)}))])}))],1),i("m-footer-car",{attrs:{title:"去结算",price:"￥30.97",num:"10",eventid:"05dd8904-3",mpcomid:"05dd8904-1"},on:{handleFn:function(e){t.showSpec(!1)},payFn:t.payFn}}),i("view",{staticClass:"popup spec",class:t.specClass,attrs:{eventid:"05dd8904-6"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),t.discard(e)},tap:t.hideSpec}},[i("view",{staticClass:"mask"}),i("view",{staticClass:"layer",attrs:{eventid:"05dd8904-5"},on:{tap:function(e){e.stopPropagation(),t.discard(e)}}},[i("view",{staticClass:"m-shopcar-box"},[t._m(0),i("view",{staticClass:"m-shopcar-item"},[i("view",{staticClass:"m-title"},[t._v("无公害小油菜/500g")]),i("view",{staticClass:"m-price"},[t._v("￥12.99")]),i("view",{staticClass:"m-controne"},[i("uni-number-box",{attrs:{min:0,max:9,mpcomid:"05dd8904-2"}})],1)]),i("view",{staticClass:"m-shopcar-item"},[i("view",{staticClass:"m-title"},[t._v("无公害小油菜/500g")]),i("view",{staticClass:"m-price"},[t._v("￥12.99")]),i("view",{staticClass:"m-controne"},[i("uni-number-box",{attrs:{min:0,max:9,mpcomid:"05dd8904-3"}})],1)])]),i("m-footer-car",{attrs:{title:"去结算",price:"￥30.97",num:"10",eventid:"05dd8904-4",mpcomid:"05dd8904-4"},on:{handleFn:function(e){t.showSpec(!1)},payFn:t.payFn}})],1)]),i("view",{directives:[{name:"show",rawName:"v-show",value:!t.hide_good_box,expression:"!hide_good_box"}],staticClass:"good_box",style:"left:"+t.bus_x+"px;top:"+t.bus_y+"px"})],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"m-header"},[i("view",{staticClass:"m-line"},[i("view",{},[t._v("购物车")]),i("view",{staticClass:"m-light"},[t._v("共5件商品")])]),i("view",{staticClass:"m-clear-car"},[t._v("清空购物车")])])}];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},b48d:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"m-footer-car",props:{title:{type:String,value:""},price:{type:String,value:""},num:{type:String,value:""}},data:function(){return{}},methods:{handleFn:function(){this.$emit("handleFn")},payFn:function(){this.$emit("payFn")}}};e.default=s},b52e:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"m-store-item"},[i("view",{staticClass:"m-img"},[i("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.rowData.img,mode:"aspectFit"}})]),i("view",{staticClass:"m-text"},[i("view",{staticClass:"m-title"},[t._v(t._s(t.rowData.name))]),i("view",{staticClass:"m-descripe"},[t._v(t._s(t.rowData.descripe))]),i("view",{staticClass:"m-price"},[t._v(t._s(t.rowData.price))]),i("view",{staticClass:"m-old-price"},[t._v("非会员价"),i("view",{staticClass:"m-num"},[t._v(t._s(t.rowData.oldprice))])])]),i("view",{staticClass:"m-distance"},[i("image",{staticStyle:{width:"40rpx",height:"40rpx"},attrs:{src:"../../static/img/icon/shop_icon_buy.png",mode:"aspectFit",eventid:"6c868792-0"},on:{tap:t.touchOnGoods}})])])},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},ba7a:function(t,e,i){"use strict";var s=i("9b8d"),a=i.n(s);a.a},c847:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(i("5632")),a=o(i("2c63")),n=o(i("39b0"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var i,s,a,n=[],o=0;o<=e;o++){a=t.slice(0),s=[];while(i=a.shift())if(a.length)s.push(r([i,a[0]],o/e));else{if(!(s.length>1))break;a=s,s=[]}n.push(s[0])}function r(t,e){var i,s,a,n,o,r,c,u,l=[];return i=t[0],s=t[1],n=s.x-i.x,o=s.y-i.y,a=Math.pow(Math.pow(n,2)+Math.pow(o,2),.5),r=o/n,c=Math.atan(r),u=a*e,l={x:i.x+u*Math.cos(c),y:i.y+u*Math.sin(c)},l}return{bezier_points:n}}var c={components:{mStorePro:a.default,uniNumberBox:n.default,mFooterCar:s.default},data:function(){return{storeData:{},hide_good_box:!0,bus_x:0,bus_y:0,finger:{},busPos:{},linePos:[],timer:null,carPrice:"10",carNum:"10",specClass:"",showCategoryIndex:0,storeMenu:[{id:1,title:"家用电器",banner:"../../static/img/category/banner.jpg",list:[{name:"精品秋葵600g",descripe:"脆糯营养，口感好，健康绿色",img:"../../static/img/1.jpg",price:"￥9.99",oldprice:"￥9.99"}]}]}},methods:{callPhone:function(e){t.makePhoneCall({phoneNumber:e})},payFn:function(){t.navigateTo({url:"/pages/order/pay"})},halfWidth:function(t){return 2*t+"px"},touchOnGoods:function(t){var e=t.elem,i=t.data;this.timer&&clearInterval(this.timer),this.finger={};var s={};this.finger["x"]=e.target.x,this.finger["y"]=e.target.y,this.finger["y"]<this.busPos["y"]?s["y"]=this.finger["y"]-150:s["y"]=this.busPos["y"]-150,s["x"]=Math.abs(this.finger["x"]-this.busPos["x"])/2,this.finger["x"]>this.busPos["x"]?s["x"]=(this.finger["x"]-this.busPos["x"])/2+this.busPos["x"]:s["x"]=(this.busPos["x"]-this.finger["x"])/2+this.finger["x"],this.linePos=r([this.busPos,s,this.finger],30),this.startAnimation(e,i)},startAnimation:function(t,e){var i=0,s=this,a=s.linePos["bezier_points"];s.hide_good_box=!1,s.bus_x=s.finger["x"],s.bus_y=s.finger["y"];var n=a.length;i=n,s.timer=setInterval(function(){i--,s.bus_x=a[i]["x"],s.bus_y=a[i]["y"],i<1&&(clearInterval(s.timer),s.hide_good_box=!0,s.addGoodSum(t,e))},25)},addGoodSum:function(t,e){console.log(e)},showCategory:function(t){this.showCategoryIndex=t},hideSpec:function(){var t=this;this.specClass="hide",this.selectSpec&&this.specCallback&&this.specCallback(),this.specCallback=!1,setTimeout(function(){t.specClass="none"},200)},showSpec:function(t){console.log("show"),this.specClass="show",this.specCallback=t},specCallback:function(){},goDetail:function(e){t.navigateTo({url:"/pages/product/product"})},discard:function(){},busHandle:function(){document.body.clientWidth;var t=document.body.clientHeight;this.busPos["x"]=45,this.busPos["y"]=t-56}},onLoad:function(t){var e=this;this.busHandle(),this.mPost("/server/s/storeById",{id:1}).then(function(t){"1"==t.code&&(e.storeData=t.data)}),this.mPost("/server/t/types",{}).then(function(t){"1"==t.code&&(console.log(t),e.storeMenu=t.data)})}};e.default=c}).call(this,i("543d")["default"])},d9b1:function(t,e,i){"use strict";i.r(e);var s=i("b48d"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},e551:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"uni-numbox"},[i("view",{staticClass:"uni-numbox__minus",class:{"uni-numbox--disabled":t.disableSubtract||t.disabled},attrs:{eventid:"443d2f40-0"},on:{click:function(e){t._calcValue("subtract")}}},[t._v("-")]),i("input",{staticClass:"uni-numbox__value",attrs:{type:"number",disabled:t.disabled,value:t.inputValue,eventid:"443d2f40-1"},on:{blur:t._onBlur}}),i("view",{staticClass:"uni-numbox__plus",class:{"uni-numbox--disabled":t.disableAdd||t.disabled},attrs:{eventid:"443d2f40-2"},on:{click:function(e){t._calcValue("add")}}},[t._v("+")])])},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},eade:function(t,e,i){},f221:function(t,e,i){}},[["a2ce","common/runtime","common/vendor"]]]);