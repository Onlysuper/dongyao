(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/vip"],{"11ca":function(e,t,i){},1388:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"m-myvip-page"},[i("view",{staticClass:"m-header"},[i("view",{staticClass:"m-user-box"},[i("view",{staticClass:"m-container"},[i("view",{staticClass:"m-user"},[i("view",{staticClass:"m-img"},[i("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.userData.avatarUrl,mode:"aspectFull"}})]),i("view",{staticClass:"m-text"},[i("view",{staticClass:"m-username"},[e._v(e._s(e.userData.nickName))])])]),e.isVip?i("view",{staticClass:"m-date"},[i("view",{staticClass:"m-text"},[e._v("续费>")]),i("view",{staticClass:"m-time"},[e._v(e._s(e.myMember.dueTime)+"到期")])]):e._e()]),e.isVip?i("view",{staticClass:"m-footer"},[i("view",{staticClass:"m-title"},[e._v(e._s(e.myMember.memberType)+e._s(e.myMember.discount))]),i("view",{staticClass:"m-describe"},[i("image",{staticStyle:{width:"59rpx",height:"59rpx","margin-right":"10rpx"},attrs:{src:"/static/img/icon/me_icon_VIP.png",mode:"aspectFit"}}),e._v(e._s(e.myMember.memberSynopsis))])]):e._e()])]),i("view",{staticClass:"m-main"},[i("m-title",{attrs:{title:"VIP折扣卡",eventid:"08553e6e-0",mpcomid:"08553e6e-0"},on:{titleHandle:function(e){}}}),e._l(e.members,function(t,s){return i("view",{key:s,staticStyle:{"padding-bottom":"30rpx"}},[i("m-vip-card",{attrs:{describes:t.describes,chooseVipId:e.chooseVipId,id:t.id,state:t.type,synopsis:t.synopsis,price:t.price,eventid:"08553e6e-1-"+s,mpcomid:"08553e6e-1-"+s},on:{chooseVip:e.chooseVip}})],1)}),i("view",{staticClass:"m-button",attrs:{eventid:"08553e6e-2"},on:{tap:e.buyVipFn}},[e._v("立即续费/购买")]),i("view",{staticClass:"m-card-describe"},[i("view",{staticClass:"m-title"},[i("view",{staticClass:"line"}),e._v(e._s(e.vieName)+"介绍"),i("view",{staticClass:"line"})]),i("view",{staticClass:"m-content"},[i("rich-text",{attrs:{nodes:e.vipDescribes,mpcomid:"08553e6e-2"}})],1)])],2)])},a=[];i.d(t,"a",function(){return s}),i.d(t,"b",function(){return a})},"1e36":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"m-vip-page",class:{actived:e.chooseVipId==e.id},attrs:{eventid:"1c71e0cf-0"},on:{tap:e.chooseVip}},[i("view",{staticClass:"m-img-box"},["0"==e.state?i("image",{staticStyle:{height:"100rpx",width:"100rpx"},attrs:{src:"/static/img/icon/member_icon_月卡.png",mode:""}}):e._e(),"1"==e.state?i("image",{staticStyle:{height:"100rpx",width:"100rpx"},attrs:{src:"/static/img/icon/member_icon_季卡.png",mode:""}}):e._e(),"2"==e.state?i("image",{staticStyle:{height:"100rpx",width:"100rpx"},attrs:{src:"/static/img/icon/member_icon_半年卡.png",mode:""}}):e._e(),"3"==e.state?i("image",{staticStyle:{height:"100rpx",width:"100rpx"},attrs:{src:"/static/img/icon/member_icon_年卡.png",mode:""}}):e._e()]),i("view",{staticClass:"m-text-box"},[i("view",{staticClass:"m-text"},[e._v(e._s(e.synopsis))]),i("view",{staticClass:"m-price"},[e._v("￥"+e._s(e.price))]),e.chooseVipId==e.id?i("image",{staticClass:"icon",staticStyle:{height:"58rpx",width:"58rpx"},attrs:{src:"/static/img/icon/member_icon_ok.png",mode:""}}):e._e()])])},a=[];i.d(t,"a",function(){return s}),i.d(t,"b",function(){return a})},"20ae":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(i("51bc")),a=n(i("c164"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),s.forEach(function(t){c(e,t,i[t])})}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o={components:{mTitle:s.default,mVipCard:a.default},data:function(){return{chooseVipId:0,isVip:!1,myMember:{nickName:"",dueTime:"",memberType:"",discount:"",memberSynopsis:""},members:[],userData:{},vipName:"",vipDescribes:""}},methods:{getUser:function(){this.userData=JSON.parse(e.getStorageSync("userData")),this.userData.avatarUrl||this.$set(this.userData,"avatarUrl",this.userData.headAddress||""),this.userData.nickName||this.$set(this.userData,"nickName",this.userData.nickname||"")},getVips:function(){var e=this,t=this;this.mPost("/server/m/members",{}).then(function(i){1==i.code&&(t.members=i.data.members,t.isVip||(e.chooseVipId=t.members[0].id,e.vipName=t.members[0].synopsis,e.vipDescribes=t.members[0].describes))})},chooseVip:function(e){this.chooseVipId=e.id,this.vipName=e.synopsis,this.vipDescribes=e.describes},changeType:function(e){switch(e){case"0":return"月";case"1":return"季";case"2":return"半年";case"3":return"年"}},myVips:function(){var e=this,t=this;this.mPost("/server/m/myMember",{}).then(function(i){if(1==i.code){var s=i.data.myMember;s?(t.isVip=!0,s&&s["memberType"]&&(s["memberType"]=t.changeType(s["memberType"])),s&&s["discount"]&&(s["discount"]=s["discount"]),t.myMember=s,t.chooseVipId=s["memberId"],t.vipName=s["discount"],t.vipDescribes=s["memberSynopsis"]):t.isVip=!1,e.getVips()}})},buyVipFn:function(){var t=this;this.mPost("/server/m/buyMember",t.chooseVipId).then(function(i){var s=i.data;if(s){var a={provider:"wxpay",timeStamp:s.timeStamp+"",nonceStr:s.nonceStr,package:s.package,signType:s.signType,paySign:s.paySign};e.requestPayment(r({},a,{success:function(i){e.showModal({title:"支付成功",content:"恭喜哦，你已成功成为会员用户",showCancel:!1,confirmText:"完成",success:function(i){i.confirm?(t.initData(),e.switchTab({url:"/pages/tabBar/user"})):i.cancel&&t.initData()}})},fail:function(e){console.log(e)}}))}}).catch(function(e){console.log(e)})},initData:function(){this.getUser(),this.myVips()}},onLoad:function(e){this.initData()}};t.default=o}).call(this,i("543d")["default"])},"22fd":function(e,t,i){"use strict";var s=i("91d6"),a=i.n(s);a.a},"3f91":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={name:"m-vip-page",props:{id:{type:String,value:""},chooseVipId:{type:String,value:""},describes:{type:String,value:""},state:{type:String,value:""},synopsis:{type:String,value:""},price:{type:String,value:""}},data:function(){return{}},methods:{chooseVip:function(){this.$emit("chooseVip",{id:this.id,describes:this.describes,synopsis:this.synopsis})}}};t.default=s},"65e6":function(e,t,i){"use strict";i.r(t);var s=i("3f91"),a=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,function(){return s[e]})}(n);t["default"]=a.a},"6cf4":function(e,t,i){"use strict";i.r(t);var s=i("20ae"),a=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,function(){return s[e]})}(n);t["default"]=a.a},"76d1":function(e,t,i){"use strict";var s=i("11ca"),a=i.n(s);a.a},"8f48":function(e,t,i){"use strict";i("ba95");var s=n(i("b0ce")),a=n(i("eaa4"));function n(e){return e&&e.__esModule?e:{default:e}}Page((0,s.default)(a.default))},"91d6":function(e,t,i){},c164:function(e,t,i){"use strict";i.r(t);var s=i("1e36"),a=i("65e6");for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i("76d1");var r=i("2877"),c=Object(r["a"])(a["default"],s["a"],s["b"],!1,null,null,null);t["default"]=c.exports},eaa4:function(e,t,i){"use strict";i.r(t);var s=i("1388"),a=i("6cf4");for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i("22fd");var r=i("2877"),c=Object(r["a"])(a["default"],s["a"],s["b"],!1,null,null,null);t["default"]=c.exports}},[["8f48","common/runtime","common/vendor"]]]);