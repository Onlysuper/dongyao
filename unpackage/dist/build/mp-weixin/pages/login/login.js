(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"094e":function(n,t,e){"use strict";e.r(t);var o=e("8525"),a=e("752c");for(var i in a)"default"!==i&&function(n){e.d(t,n,function(){return a[n]})}(i);e("f344");var s=e("2877"),u=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=u.exports},"2b3f":function(n,t,e){"use strict";e("ba95");var o=i(e("b0ce")),a=i(e("094e"));function i(n){return n&&n.__esModule?n:{default:n}}Page((0,o.default)(a.default))},3853:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={data:function(){return{SessionKey:"",OpenId:"",nickName:null,avatarUrl:null,isCanUse:n.getStorageSync("isCanUse")||!0}},methods:{loginFn:function(){var t=this;n.showLoading({title:"登录中..."}),n.login({provider:"weixin",success:function(e){var o=e.code;n.showToast({title:o,icon:"none"}),t.mPost("/auth/wxLogin",{code:o}).then(function(t){if(n.showToast({title:JSON.stringify(t)}),t.data){var e=t.data;n.setStorageSync("authToken",e.authToken),n.showToast({title:"authToken"+n.getStorageSync("authToken"),icon:"none"})}n.hideLoading()}).catch(function(t){console.log(t),n.hideLoading()})}})},wxGetUserInfo:function(t){var e=this;if(!t.detail.iv)return n.showToast({title:"您取消了授权,登录失败",icon:"none"}),!1;n.getUserInfo({provider:"weixin",success:function(t){var o=t.userInfo.nickName;t.userInfo.avatarUrl;n.showToast({title:o,icon:"none"});try{n.setStorageSync("isCanUse",!1),e.updateUserInfo()}catch(a){}},fail:function(n){}})},updateUserInfo:function(){}},onLoad:function(){this.loginFn()}};t.default=e}).call(this,e("543d")["default"])},"56a7":function(n,t,e){},"752c":function(n,t,e){"use strict";e.r(t);var o=e("3853"),a=e.n(o);for(var i in o)"default"!==i&&function(n){e.d(t,n,function(){return o[n]})}(i);t["default"]=a.a},8525:function(n,t,e){"use strict";var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("view",{staticClass:"m-login-page"},[e("view",{staticClass:"m-img-box"},[n._v("东尧蔬菜")]),e("view",{},[e("button",{staticClass:"m-but",attrs:{type:"primary","open-type":"getUserInfo",withCredentials:"true",lang:"zh_CN",eventid:"8ff3bae4-0"},on:{getuserinfo:n.wxGetUserInfo}},[n._v("授权登录")])],1)])},a=[];e.d(t,"a",function(){return o}),e.d(t,"b",function(){return a})},f344:function(n,t,e){"use strict";var o=e("56a7"),a=e.n(o);a.a}},[["2b3f","common/runtime","common/vendor"]]]);